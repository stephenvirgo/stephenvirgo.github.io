<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
<head>
	<title>Campaign Conversations script class</title>
	<link rel="stylesheet" href="../stylesheet.css" type="text/css" />
</head>

<body>

	<a name="top"></a>

	<div id="container">

		<div style="background-color:#fff7cc" id="main">

			<div style="background-color:#fff7cc" id="navigation_left">
				<br/>
				<h1 class="navigation_header"><i>Campaign Documentation</i></h1>
				<a href="../index.html">Scripting Homepage</a>
				<h2 style="background-color:#ffed8c">Search</h2>
				<ul>
				<form id="search_env_checkbox" class="search_env_checkbox">
					<label for="search_current_env_only">Search campaign only</label>
					<input type="checkbox" name="search_current_env_only" checked /><br />
				</form>
				<form id="search" class="search_form" onsubmit="return false">
					<input class="search_input" type="text" placeholder="Search.."/><br />
					<div id="search_dropdown" class="search_dropdown"></div>
				</form>				<h2 style="background-color:#ffed8c">Game Areas</h2>
				<ul>
					<li><strong> > Campaign Index</strong></li>
					<li><a href="../battle/battle_index.html">Battle Index</a></li>
					<li><a href="../frontend/frontend_index.html">Frontend Index</a></li>
				</ul>

				<h2 style="background-color:#ffed8c">On this page</h2>
				<ul>
				<div class="key">
					<strong>Key</strong>
					<table class="key">
						<tr>
							<td width="75%">Loaded in Campaign</td>
							<td><img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Battle</td>
							<td><img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="10" width="10" /></td>
						</tr>
						<tr>
							<td width="75%">Loaded in Frontend</td>
							<td><img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="10" width="10" /></td>
						</tr>
						</table>
				</div>
					<li><a href="#class:campaign_conversation">Campaign Conversations</a><img alt="Loaded in Campaign" style="float:right; margin-right:1em;" src="../images/loaded_in_campaign.png" height="10" width="10" /></li>
					<ul>
						<li>&emsp;&emsp;<a href="#section:campaign_conversation:At A Glance">At A Glance</a></li>
						<li>&emsp;&emsp;<a href="#section:campaign_conversation:Declaration">Declaration</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:new">new</a></li>
						<li>&emsp;&emsp;<a href="#section:campaign_conversation:Configuration">Configuration</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:set_proceed_on_advice_finished">set_proceed_on_advice_finished</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:set_default_delay">set_default_delay</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:set_play_with_cutscene_bars">set_play_with_cutscene_bars</a></li>
						<li>&emsp;&emsp;<a href="#section:campaign_conversation:Actions">Actions</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:add_advice">add_advice</a></li>
						<li>&emsp;&emsp;<a href="#section:campaign_conversation:Starting and Stopping">Starting and Stopping</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:start">start</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:is_active">is_active</a></li>
							<li>&emsp;&emsp;&emsp;&emsp;<a href="#function:campaign_conversation:skip">skip</a></li>
					</ul>

				</ul>
			</div>

			<div style="background-color:#fff7cc" id="navigation_right">				<h2 style="background-color:#ffed8c">Campaign Topics</h2>
				<ul>
					<li><a href="campaign_index.html">Campaign Index</a></li>
					<li><a href="campaign_script_structure.html">Campaign Script Structure</a></li>
					<li><a href="lua.html">Lua Language</a></li>
					<li><a href="scripted_events.html">Scripted Events</a></li>

				</ul>

				<h2 style="background-color:#ffed8c">Game Code Interfaces</h2>
				<ul>
					<li><a href="CampaignUI.html">CampaignUI</a></li>
					<li><a href="PanelManager.html">PanelManager</a></li>
					<li><a href="cinematics.html">Cinematics</a></li>
					<li><a href="common.html">Common</a></li>
					<li><a href="episodic_scripting.html">Episodic Scripting</a></li>
					<li><a href="model_hierarchy.html">Model Hierarchy</a></li>
					<li><a href="scriptedvalueregistry.html">ScriptedValueRegistry</a></li>
					<li><a href="uicomponent.html">UIComponents</a></li>

				</ul>

				<h2 style="background-color:#ffed8c">Script Interfaces</h2>
				<ul>
					<li><a href="campaign_manager.html">Campaign Manager</a></li>
					<li><a href="core.html">Core</a></li>
					<li><strong> > Campaign Conversations</strong></li>
					<li><a href="campaign_cutscene.html">Campaign Cutscenes</a></li>
					<li><a href="campaign_ui_manager.html">Campaign UI Manager</a></li>
					<li><a href="chapter_mission.html">Chapter Missions</a></li>
					<li><a href="convex_area.html">Convex Areas</a></li>
					<li><a href="core_object.html">Custom Context</a></li>
					<li><a href="global.html">Global</a></li>
					<li><a href="infotext_manager.html">Infotext Manager</a></li>
					<li><a href="intervention.html">Interventions</a></li>
					<li><a href="invasion_manager.html">Invasion Manager</a></li>
					<li><a href="mission_manager.html">Mission Managers</a></li>
					<li><a href="movie_overlay.html">Movie Overlays</a></li>
					<li><a href="narrative_event.html">Narrative Events</a></li>
					<li><a href="navigable_tour.html">Navigable Tours</a></li>
					<li><a href="objectives_manager.html">Objectives Manager</a></li>
					<li><a href="payload.html">Payload String Constructor</a></li>
					<li><a href="random_army_manager.html">Random Army Manager</a></li>
					<li><a href="script_messager.html">Script Messager</a></li>
					<li><a href="scripted_tour.html">Scripted Tours</a></li>
					<li><a href="text_pointer.html">Text Pointers</a></li>
					<li><a href="timer_manager.html">Timer Manager</a></li>
					<li><a href="topic_leader.html">Topic Leader</a></li>

				</ul>

				<h2 style="background-color:#ffed8c">Data Interfaces</h2>
				<ul>
					<li><a href="narrative.html">Narrative</a></li>
					<li><a href="narrative_events.html">Narrative Event Templates</a></li>
					<li><a href="narrative_queries.html">Narrative Query Templates</a></li>
					<li><a href="narrative_triggers.html">Narrative Trigger Templates</a></li>

				</ul>

				</ul>
			</div>

			<div id="content">
				<a name="class:campaign_conversation"><h1 class="content_header">Campaign Conversations</h1></a>
				<p>The campaign conversation system provides an interface for easy scripting of conversations. This is when multiple items of advice (or similar types of content, such as VO with subtitles) are played back-to-back with the player observing, and clicking through each.</p>
							<table class="loaded_in" style="margin-top: 1em;">
								<tr>
									<td>
										Loaded in Campaign
									</td>
									<td>
										<img alt="Loaded in Campaign" style="float:right;" src="../images/loaded_in_campaign.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Battle
									</td>
									<td>
										<img alt="Loaded in Battle" style="float:right;" src="../images/loaded_in_battle.png" height="18" width="18" />
									</td>
								</tr>
								<tr>
									<td>
										Loaded in Frontend
									</td>
									<td>
										<img alt="Loaded in Frontend" style="float:right;" src="../images/loaded_in_frontend.png" height="18" width="18" />
									</td>
								</tr>
							</table>

				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:campaign_conversation:At A Glance"><h2 class="section_header">At A Glance</h2></a>
				</div>
				<p>A conversation is first declared with <code><a href="#function:campaign_conversation:new">campaign_conversation:new</a></code>. This returns a campaign conversation object.</p>
				<p>Once declared, a conversation may optionlly be configured with the functions in the <code><a href="#section:campaign_conversation:Configuration">Configuration</a></code> section of this documentation. It is mandatory, however, to add actions with <code><a href="#function:campaign_conversation:add_advice">campaign_conversation:add_advice</a></code> or similar.</p>
				<p>A conversation that is configured can then be started with <code><a href="#function:campaign_conversation:start">campaign_conversation:start</a></code>. A running conversation may be skipped by calling <code><a href="#function:campaign_conversation:skip">campaign_conversation:skip</a></code>.</p>

				<h4>Example:</h4>
				<div id="example_code"><code>
					local conv_example = campaign_conversation:new(<br />
					&emsp;&emsp;&emsp;&emsp;"example_conversation",<br />
					&emsp;&emsp;&emsp;&emsp;function(),<br />
					&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;out("Conversation completed!")<br />
					&emsp;&emsp;&emsp;&emsp;true<br />
					)<br />
					<br />
					conv_example:set_default_delay(1.5)<br />
					<br />
					conv_example:add_advice("example_advice_key_1")<br />
					conv_example:add_advice("example_advice_key_2")<br />
					conv_example:add_advice("example_advice_key_3")<br />
					conv_example:add_advice("example_advice_key_4")<br />
					<br />
					conv_example:start()<br />
				</code></div>
				<div class="section_body">
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:campaign_conversation:Declaration"><h2 class="section_header">Declaration</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:new"><h3 class="function_name"><strong><code>campaign_conversation:new(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">name</i><code><strong>, [<code><a href="lua.html#class:function">function</a></code> </strong></code><i class="parameter">end callback</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Creates and returns a new campaign conversation object.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>String name for the conversation. This is used for output.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:function">function</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Callback to call when the conversation ends.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 73</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:campaign_conversation:Configuration"><h2 class="section_header">Configuration</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:set_proceed_on_advice_finished"><h3 class="function_name"><strong><code>campaign_conversation:set_proceed_on_advice_finished([<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">proceed automatically</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets whether the conversation should automatically proceed to the next section when advice audio has finished playing. By default this is set to <code>false</code> which means the player will need to dismiss advice items manually to progress.<br />
							This default value can also be overridden on a per-advice basis as it is added with <code><a href="#function:campaign_conversation:add_advice">campaign_conversation:add_advice</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>Proceed automatically on advice audio finished.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 114</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:set_default_delay"><h3 class="function_name"><strong><code>campaign_conversation:set_default_delay(<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">delay interval s</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Sets the default delay between one conversation item finishing and the next starting. By default this is half a second.<br />
							This default value can also be overridden on a per-advice basis as it is added with <code><a href="#function:campaign_conversation:add_advice">campaign_conversation:add_advice</a></code>.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p>Delay interval in seconds.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 127</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:set_play_with_cutscene_bars"><h3 class="function_name"><strong><code>campaign_conversation:set_play_with_cutscene_bars([<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">play with cutscene bars</i><code><strong>])</code></strong></h3></a>
						</dt>
						<dd>
							Sets whether the conversation should play out with cutscene bars. This is disabled by default - use this function to enable this behaviour.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=true</i></p>
										<p>play with cutscene bars</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 140</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:campaign_conversation:Actions"><h2 class="section_header">Actions</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:add_advice"><h3 class="function_name"><strong><code>campaign_conversation:add_advice(<br />&emsp;&emsp;<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">advice key</i><code><strong>, <br />&emsp;&emsp;[<code><a href="lua.html#class:table">table</a></code> </strong></code><i class="parameter">infotext</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">show topic leader</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">dismiss before playing</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:number">number</a></code> </strong></code><i class="parameter">initial delay</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:boolean">boolean</a></code> </strong></code><i class="parameter">proceed on advice finished</i><code><strong>], <br />&emsp;&emsp;[<code><a href="lua.html#class:function">function</a></code> </strong></code><i class="parameter">start callback</i><code><strong>]<br />)</code></strong></h3></a>
						</dt>
						<dd>
							Adds an advice record to play in sequence as part of the conversation.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>Advice key, from the <code>advice_threads</code> database table.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>2</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:table">table</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Infotext to show with the advice. This should be a table of strings.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>3</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=false</i></p>
										<p>Use the first line of infotext as a topic leader.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>4</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Dismiss the advisor before playing this item of advice. This happens by default, but this flag can be set to <code>false</code> to disable this behaviour.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>5</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:number">number</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Delay in seconds between this section of the conversation starting and the advice being triggered. If supplied, this value overrides the default behaviour set with <code><a href="#function:campaign_conversation:set_default_delay">campaign_conversation:set_default_delay</a></code>, but just for this advice.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>6</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:boolean">boolean</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Proceed immediately after this advice has finished playing to the next advice (or end of the conversation). If supplied, this value overrides the default behaviour set with <code><a href="#function:campaign_conversation:set_proceed_on_advice_finished">campaign_conversation:set_proceed_on_advice_finished</a></code>, but just for this advice.</p>
									</td>
								</tr>
								<tr>
									<td>
										<p><strong>7</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:function">function</a></code></code></p>
									</td>
									<td>
										<p><i>optional, default value=nil</i></p>
										<p>Optional callback to call when this conversation item starts playing.</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 167</p>
						</dd>
					</dl>
				</div>


				<div>
					<a style="float:right;" href="#top">Back to top</a>
					<a name="section:campaign_conversation:Starting and Stopping"><h2 class="section_header">Starting and Stopping</h2></a>
				</div>
				<div class="section_body">
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:start"><h3 class="function_name"><strong><code>campaign_conversation:start()</code></strong></h3></a>
						</dt>
						<dd>
							Starts the conversation. Conversation records need to have been added with <code><a href="#function:campaign_conversation:add_advice">campaign_conversation:add_advice</a></code> or equivalent before this function is called.


							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 217</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:is_active"><h3 class="function_name"><strong><code>campaign_conversation:is_active()</code></strong></h3></a>
						</dt>
						<dd>
							Returns whether this conversation is currently playing or not.


							<h4>Returns:</h4>
							<ol>
								<li><code><code><a href="lua.html#class:boolean">boolean</a></code></code> is conversation playing</li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 392</p>
						</dd>
					</dl>
					<dl class="function">
						<dt>
							<a name="function:campaign_conversation:skip"><h3 class="function_name"><strong><code>campaign_conversation:skip(<code><a href="lua.html#class:string">string</a></code> </strong></code><i class="parameter">reason</i><code><strong>)</code></strong></h3></a>
						</dt>
						<dd>
							Skips the running conversation, ending it immediately. A string reason may be supplied for output purposes.

							<h4>Parameters:</h4>
							<table class="parameter_list">
								<colgroup>
									<col style="width: 3%;">
									<col style="width: 12%;">
									<col style="width: 85%;">
								</colgroup>
								<tr>
									<td>
										<p><strong>1</strong></p>
									</td>
									<td>
										<p><code><code><a href="lua.html#class:string">string</a></code></code></p>
									</td>
									<td>
										<p>reason</p>
									</td>
								</tr>
							</table>

							<h4>Returns:</h4>
							<ol>
								<li><code>nil</code></li>
							</ol>
							<p class="file_comment">defined in ../../Warhammer/working_data/script/_lib/lib_campaign_conversation.lua, line 400</p>
						</dd>
					</dl>
				</div>


			</div>

		</div>

		<div id="about">Last updated 08/11/2023 01:05:10</div>

	</div>

	<script src="../searchdata.js"></script>
	<script src="../search.js"></script>
	<script>const page_env = "campaign"; const path_to_document_root = "../";</script>

</body>
</html>